<!DOCTYPE html>
<html>
<head>
	<title></title>
</head>
<body>
<p id="oData">ORIENTATION DATA: </p>
<p id="mData">MOTION DATA:</p>
</body>
<script>

var viewAngle = 75;
var aspectRatio = window.innerWidth / window.innerHeight;
var near = 10;
var far = 2500;
var cam = new THREE.PerspectiveCamera(viewAngle, aspectRatio, near, far);
var scene = new THREE.Scene();
var renderer = new THREE.WebGLRenderer();
var cube;

var ptLight = new THREE.PointLight(0xFFFFFF);

init();
animatedRender();

var Vec3 = function(x,y,z){
	return new THREE.Vector3(x,y,z);
};

function init(){
	ptLight.position.x = 10;
	ptLight.position.y = 50;
	ptLight.position.z = 130;

	scene.add(ptLight);
	cam.position.y = 500;
	cam.position.z = 1500;

	cam.lookAt(Vec3(0,0,0));
	scene.add(cam);
}

var onOrientationChange = function(data){ 
	var oText = "ORIENTATION DATA: <br />";

	oText += "Alpha (yaw): " + data.alpha + "<br />";
	oText += "Beta (pitch): " + data.beta + "<br />";
	oText += "Gamma (roll): " + data.gamma + "<br />";

	document.getElementById("oData").innerHTML = oText; 
};

//if this browser / device can detect device orientation events...
if (window.DeviceOrientationEvent){
	window.addEventListener('deviceorientation',onOrientationChange,false);
} else {
	console.log("ERROR: This browser can't detect orientation events");
}

function createCube(){
	// var rColor = Math.abs(latestMData.acceleration.x);
	// var gColor = Math.abs(latestMData.acceleration.y);
	// var bColor = Math.abs(latestMData.acceleration.z);
	// var cubeColor = new THREE.Color(rColor, gColor, bColor);

	var geometry = new THREE.BoxGeometry( 5, 5, 5);
	var material = new THREE.MeshBasicMaterial({color: 0x00ff00});
	cube = new THREE.Mesh(geometry, material);
	scene.add(cube);
}

function animatedRender(){
	requestAnimationFrame(animatedRender);
	 renderer.render(scene, cam);
}

//function called when decive motion data updates
var latestMData;
var onDeviveMotion = function(data){
	latestMData = data;

	var mText = "MOTION DATA: <br />";

	mText += "Acceleration x: " + data.acceleration.x + "<br />";
	mText += "Acceleration y: " + data.acceleration.y + "<br />";
	mText += "Acceleration z: " + data.acceleration.z + "<br />";

	document.getElementById("mData").innerHTML = mText;
}

//setting up our webpage/ app to handle pre-existing js/html5 events
if (window.DeviceMotionEvent){
	window.addEventListener('devicemotion', onDeviveMotion, false)
} else {
	console.log("ERROR: browser cant detet device motion");
}

</script>
</html>